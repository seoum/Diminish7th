// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id       Int        @id @default(autoincrement())
  username String     @unique
  password String
  nickname String     @unique
  cash     Int        @default(10000)
  rating   Int        @default(1000)
  storage  Storage[]  @relation("UserStorage")
  squad    Squad?     @relation("UserSquad")
  matchesA MatchLog[] @relation("UserA")
  matchesB MatchLog[] @relation("UserB")
  userCard UserCard[] @relation("UserCards")
}

model Storage {
  id     Int      @id @default(autoincrement())
  user   Users    @relation("UserStorage", fields: [userid], references: [id], onDelete: Cascade)
  userid Int
  card   UserCard @relation("CardStorage", fields: [cardid], references: [id], onDelete: Cascade)
  cardid Int
}

model BaseCard {
  id         Int    @id
  playername String
  position   String
  shoot      Int
  pass       Int
  defense    Int
}

model UserCard {
  id         Int       @id @default(autoincrement())
  playername String
  position   String
  user       Users     @relation("UserCards", fields: [userid], references: [id], onDelete: Cascade)
  userid     Int
  level      Int       @default(0)
  shoot      Int
  pass       Int
  defense    Int
  storage    Storage[] @relation("CardStorage")
  squad1     Squad[]   @relation("Player1")
  squad2     Squad[]   @relation("Player2")
  squad3     Squad[]   @relation("Player3")
}
